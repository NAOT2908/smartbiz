<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="smartbiz_tcc.report_stock_picking_bien_ban_giao_nhan" >
<t t-foreach="docs" t-as="o">
<t t-call="web.html_container">
            <t t-call="web.external_layout">
                <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang or o.env.lang)"/>
                <t t-set="partner" t-value="o.partner_id or (o.move_ids and o.move_ids[0].partner_id) or False"/>
                
                <!--<t t-set="address" t-value="o" />-->
                
                <t t-set="information_block">
                </t>
                <br/>
                <br/>
                <div class="page" style="font-size: 13px; font-family: Times New Roman;">
                    <div class="row justify-content-end mb16">
                      <div style=" text-align: center; font-size: 13px; font-family: Times New Roman;">
                       <h3 style="color: #1c4ab5; font-weight: bolder">BIÊN BẢN GIAO NHẬN HÀNG HÓA</h3>
                       <h3 style="color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                       <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                      </div>
                        
                    </div>
                    <p/>
                   
                     <div style="font-size: 13px; font-family: Times New Roman;">
                        <p>Chúng tôi gồm: </p>
                        <p style="font-weight: bold;">A. BÊN GIAO HÀNG: CÔNG TY CP THƯƠNG MẠI VÀ TƯ VẤN TÂN CƠ 
                            <t t-if="'Bán hàng' != o.sale_id.team_id.name">
                              - KHO <span style="font-weight: bold;text-transform: uppercase;" t-field="o.picking_type_id.warehouse_id"/> 
                            </t>
                        </p>
                        <p style="font-weight: bold; margin-top: -15px"> Đơn vị: 
                            <t t-if="'Bán hàng' != o.sale_id.team_id.name">
                                <span style="font-weight: bold;text-transform: uppercase;" t-field="o.sale_id.team_id"/>
                            </t>
                            <t t-if="'Bán hàng' == o.sale_id.team_id.name">
                                <span style="font-weight: bold;text-transform: uppercase;" t-field="o.picking_type_id.warehouse_id"/> 
                            </t>
                        </p>
                        
                        <!--<p style="font-weight: bold; margin-top: -15px"> Đơn vị: <span t-field="o.origin"/> </p>-->
                         
                        <div class="row mt32 mb32" style="margin-top: -15px">
                          <div class="col-3" name="div_origin">
                              <p>1. Ông (Bà):<span t-field="o.sender_contact"/></p> 
                          </div>
                          
                          <div class="col-3" name="div_origin">
                             <p>Chức vụ: <span t-field="o.sender_contact_title"/></p>
                          </div>
                          
                          <div class="col-3" name="div_origin">
                             <p>Điện thoại: <span t-field="o.sender_contact_phone"/> </p>
                          </div>
                        </div>
                        
                        <p/>
                        <!--<p><span>1. Ông (Bà): </span><span style="margin-left: 100px;">Chức vụ:</span> <span style="margin-left: 100px;">Điện thoại:</span></p>-->
                        <p><b>B. BÊN VẬN TẢI: <span t-field="o.carrier_name"/> </b></p>
                        
                        <div class="row mt32 mb32" style="margin-top: -15px">
                          <div class="col-3" name="div_origin">
                             <p>1. Ông (Bà):<span t-field="o.carrier_contact"/></p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Chức vụ: <span t-field="o.carrier_contact_title"/> </p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Biển số xe: <span t-field="o.license_plates"/></p>
                          </div>
                        </div>
                        
                         <div class="row mt32 mb32">
                          <div class="col-3" name="div_origin">
                             <p>2. CCCD/GPLX số: <span t-field="o.carrier_contact_id_card"/> </p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Ngày cấp: <span t-field="o.carrier_contact_issue_date"/></p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Nơi cấp: <span t-field="o.carrier_contact_issue_place"/></p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Điện thoại: <span t-field="o.carrier_contact_phone"/></p>
                          </div>
                        </div>
                        
                        
                        <p/>
                        <p><b>C. BÊN NHẬN HÀNG: </b> <b> <span class="m-0" t-field="o.partner_id"/></b></p>
                         <div class="row mt32 mb32" style="margin-top: -15px">
                          <div class="col-3" name="div_origin">
                             <p>1. Ông (Bà): 
                                <span t-field="o.contact"/>
                             </p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Chức vụ: <span t-field="o.contact_title"/> </p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Điện thoại: 
                             <span t-field="o.contact_phone"/> 
                             </p>
                          </div>
                        </div>
                        
                        <div class="row mt32 mb32">
                          <div class="col-3" name="div_origin">
                             <p>2. CCCD/GPLX số: <span t-field="o.contact_id_card"/> </p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Ngày cấp: <span t-field="o.issue_date"/></p>
                          </div>
                          <div class="col-3" name="div_origin">
                             <p>Nơi cấp: <span t-field="o.issue_place"/></p>
                          </div>
                          <!--<div class="col-3" name="div_origin">-->
                          <!--   <span>Điện thoại: </span>-->
                          <!--</div>-->
                        </div>
                        <!--<p><span>1. Ông (Bà): </span> <span style="margin-left: 100px;">Chức vụ:</span> <span style="margin-left: 100px;">Điện thoại:</span></p>-->
                        <!--<p><span>2. CCCD số: </span> <span style="margin-left: 100px;">Ngày cấp:</span> <span style="margin-left: 100px;">Nơi cấp:</span><span style="margin-left: 100px;">Điện thoại:</span></p>-->
                        <p/>
                        <p>Tiến hành xác nhận số lượng hàng hóa giao nhận cụ thể như sau:</p>
                        <p><b>I. TẠI NƠI NHẬN HÀNG: </b></p>
                        <p style="font-weight: bold;">1. Địa chỉ:  
                            <t t-if=" 'KHV' in o.name">
                                <span>Kho Hòa Việt, Khu Phố 8, Phường Long Bình, Biên Hòa, Đồng Nai</span>
                            </t>
                            <t t-if=" 'KHD' in o.name">
                                <span>Quốc lộ 5 - Cẩm Điền - Cẩm Giàng - Hải Dương</span>
                            </t>
                            <t t-if=" 'KDN' in o.name">
                                <span> 111-113 Lê Hiến Mai, Phường Hòa Minh, Quận Liên Chiểu, TP Đà Nẵng</span>
                            </t>
                       </p>
                        <p style="font-weight: bold;">2. Thời gian xe đến: <span t-field="o.arrival_time"/></p>
                        <p><b>3. Hàng hóa:  </b></p>
              
                      </div>
                  
                    <div class="row mt32 mb32">
                        <div t-if="o.origin" class="col-auto" name="div_origin">
                            <strong>Đơn hàng:</strong>
                            <p t-field="o.origin"/>
                        </div>
                        <div t-if="o.state" class="col-auto" name="div_sched_date">
                            <strong>Ngày vận chuyển:</strong>
                            <t t-if="o.state == 'done'">
                                <p t-field="o.date_done"/>
                            </t>
                            <t t-if="o.state != 'done'">
                                <p t-field="o.scheduled_date"/>
                           </t>
                        </div>
                    </div>
                    <p/>
                    <table class="table table-sm table-bordered" t-if="o.state!='done'" name="stock_move_table">
                        <thead>
                            <tr>
                                <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_no">Số TT</th>
                                <th style="border: 1px solid #000" name="th_sm_product"><strong>Tên hàng - quy cách</strong></th>
                                <th style="border: 1px solid #000" name="th_sm_dvt"><strong>ĐVT</strong></th>
                                <th style="border: 1px solid #000" name="th_sm_ordered"><strong>Số lượng đặt hàng</strong></th>
                                <th style="border: 1px solid #000" name="th_sm_quantity"><strong>Số lượng đã giao</strong></th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="lines" t-value="o.move_ids.filtered(lambda x: x.product_uom_qty)"/>
                            <t t-set="total_qty_uom_done" t-value="0"/>         
                            <t t-set="total_quantity_done" t-value="0"/>
                            <t t-set="index" t-value="0"/>
                            <tr t-foreach="lines" t-as="move">
                                <t t-set="index" t-value="index + 1"/>
                                <td style="border: 1px solid black; text-align: center;" t-esc="index"/>
                                <td style="border: 1px solid #000">
                                    <span t-field="move.product_id"/>
                                    <p t-if="move.description_picking != move.product_id.name and move.description_picking != move.product_id.display_name">
                                        <span t-field="move.description_picking"/>
                                    </p>
                                </td>
                                <td style="border: 1px solid #000;text-align: center;">
                                    <span t-field="move.product_uom"/>
                                </td>
                                <td style="border: 1px solid #000;text-align: center;">
                                    <span t-field="move.product_uom_qty"/>
                                    
                                    <t t-set="total_qty_uom_done" t-value="total_qty_uom_done + move.product_uom_qty"/>
                                </td>
                                <td style="border: 1px solid #000; text-align: center;">
                                    <span t-field="move.quantity"/>
                                    
                                    <t t-set="total_quantity_done" t-value="total_quantity_done + move.quantity"/>
                                </td>
                            </tr>
                            <t>
                              <tr style="border: 1px solid #000; text-align: center; vertical-align: middle;">
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <td/>
                                        
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td style="font-size: 15px; font-weight: bold">
                                          <span t-esc="total_qty_uom_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td>
                                          <span t-esc="total_quantity_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                          <!--<span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
	                                        <!--<span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
                                        </td>
                               </tr>
                             </t>
                        </tbody>
                    </table>
                    <table class="table table-sm mt48 table-bordered" t-if="o.move_line_ids and o.state=='done'" name="stock_move_line_table">
                        <!--t-if="o.move_line_ids and o.state=='done'"-->
                        <t t-set="has_serial_number" t-value="False"/>
                        <!--<t t-set="result_package_id" t-value="False"/>-->
                        <t t-set="has_result_package_id" t-value="any(move_line.result_package_id for move_line in o.move_line_ids)"/>
                        <!--<t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>-->
                        <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                        <t t-set="has_serial_number" t-value="o.move_line_ids.mapped('lot_id')" groups="stock.group_lot_on_delivery_slip"/>
                        <thead>
                            <tr>
                                <th style="border: 1px solid black; text-align: center; vertical-align: middle;width: 40px"><strong>Số TT</strong></th>
                                <th name="th_sml_product1" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong>Tên hàng - quy cách</strong></th>
                                <th name="th_sml_product2" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong>ĐVT</strong></th>
                                <!--<th name="th_sml_qty_ordered" class="text-center" style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="not has_serial_number">-->
                                <!--    <strong>Số lượng đặt hàng</strong>-->
                                <!--</th>-->
                                <th name="th_sml_quantity" class="text-center" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong>Số lượng</strong></th>
                                <!--<th name="th_sml_product"><strong/>Số lượng</th>-->
                                <t name="lot_serial">
                                    <th style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        Số Lô
                                    </th>
                                </t>
                                <!--<t t-if="result_package_id">-->
                                 <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Mã đóng gói</th>
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Loại bao bì</th>
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Số kiện đóng gói</th>
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Trọng lượng (Kg)</th>
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle; width: 150px"><strong/>Ghi chú</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                          <t t-set="total_qty_done" t-value="0"/>
                          <!--<t t-set="total_reserved_uom_qty" t-value="0"/>         -->
                          <t t-set="total_weight_done" t-value="0"/>
                          <t t-set="total_weight_uom_qty" t-value="0"/>
                          <t t-set="total_"/>
                          <t t-set="index" t-value="0"/>
                                    <t t-foreach="o.move_line_ids_without_package" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center;" t-esc="index"/>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                                <!--<t t-set="total_reserved_uom_qty" t-value="total_reserved_uom_qty + ml.reserved_uom_qty"/>-->
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.quantity"/>
                                                
                                                <!--<span t-field="ml.product_uom_id" groups="uom.group_uom"/>-->
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6">
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'humanreadable': 1, 'width': 400, 'height': 100, 'img_style': 'width:100%;height:35px;'}"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                <!--<span t-esc="ml.location_id.display_name"/>-->
                                                <!--    <t t-if="ml.package_id">-->
                                                        <div t-if="has_result_package_id" t-esc="ml.result_package_id.name" t-options="{'widget': 'barcode','symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                        <span t-field="ml.result_package_id"/>
                                                    <!--</t>-->
                                            </td>
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;">-->
                                              <!--t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations"-->
                                            <!--    <div>-->
                                                        <!--<span t-field="ml.move_id.quantity_done"/>-->
                                            <!--    </div>-->
                                            <!--</td>-->
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center" t-if="has_barcode">-->
                                            <!--    <t t-if="product_barcode != ml.product_id.barcode">-->
                                            <!--        <span t-if="ml.product_id and ml.product_id.barcode">-->
                                            <!--            <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                            <!--        </span>-->
                                            <!--        <t t-set="product_barcode" t-value="ml.product_id.barcode"/>-->
                                            <!--    </t>-->
                                            <!--</td>-->
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">-->
                                            <!--  <span t-field="ml.move_id.package_code"/>-->
                                            <!--</td>-->
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.package_type"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.number_of_packages"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.actual_weight"/>
                                              <t t-set="total_weight_done" t-value="total_weight_done + float(ml.move_id.actual_weight)"/>
                                            </td>
                                           
                                          
                                              <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.note"/>
                                            </td>
                                           
                                            <!--<t t-if="'INT' in o.name">-->
                                            <!--  <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom"/>-->
                                            <!--</t>-->
                                        </tr>
                                    </t>
                                   <t>
                                      <tr style="border: 1px solid #000; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td style="font-size: 15px; font-weight: bold">
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <!--<span t-if="o.state != 'done'" t-esc="total_reserved_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
                                        </td>
                                        <td>
                                         <!-- <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
	                                        <!--<span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
                                        </td>
                                      
                                        <td/>
                                        <td/>
                                        <!--<td/>-->
                                        <td style="font-size: 15px; font-weight: bold">
                                          <!--<span t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
                                        </td>
                                       
                                          <td/>
                                          <td/>
                                        
                                      </tr>
                                    </t>
                            
                        </tbody>
                    </table>
                     
                    <div>
                      <p style="font-weight: bold;">- Ngoại quan hàng hóa: </p>
                      <p style="font-weight: bold;">- Nhãn mác đóng gói:  </p>
                      <p style="font-weight: bold;">- Tình trạng khác (nếu có):</p>
                      <p style="font-weight: bold;">4. Hồ sơ - chứng từ đi kèm: </p>
                      <p style="font-weight: bold;">II. TẠI NƠI GIAO HÀNG:  </p>
                      <p style="font-weight: bold;">1. Địa chỉ: <span t-field="o.delivery_address"/> </p>
                      <p style="font-weight: bold;">2. Thời gian xe đến: <span t-field="o.arrival_time"/></p>
                      <p style="font-weight: bold;">Thời gian giao hàng xong:</p>
                      
                      <div> 
                        <span style="font-weight: bold;"> 3. </span>
                        <span style="font-weight: bold;"> Tình trạng hàng hóa </span>
                        <span>
                        	(Trường hợp bao bì đóng gói không còn nguyên vẹn hoặc có sự sai khác về số lượng/chất lượng hàng hóa, 
                        	Bên nhận hàng có trách nhiệm ghi chi tiết sự sai khác ở mã hàng nào và loại bao bì đóng gói nào... 
                        	vào Biên bản này với sự xác nhận của Bên vận tải; nếu không coi như "Số lượng hàng hóa đã nhận đủ và chất lượng hàng đạt yêu cầu". 
                        	Đối với sản phẩm lắp xiết cần kiểm đếm chi tiết hơn, Bên nhận hàng có trách nhiệm phản hồi sự sai lệch về số liệu giao nhận cho
                        	Bên giao hàng biết trong vòng 03 (ba) ngày kể từ ngày nhận hàng. 
                        	Nếu sau 03  ngày mà Bên nhận hàng không có phản hồi gì thì coi như đã đồng ý với số liệu của Biên bản này cũng như các chứng từ kèm theo
                        	- trừ trường hợp có sự thỏa thuận khác hơn): 
                        </span>
                      </div>
                      
                      <div>
                        <span style="font-weight: bold;"> 4. </span>
                        <span style="font-weight: bold;"> Tình trạng hồ sơ - chứng từ </span>
                        <span>
                          (Trường hợp bị thiếu hồ sơ - chứng từ đi kèm thì ghi rõ thiếu chứng từ, tài liệu nào; nếu không coi như đã nhận đủ):
                        </span>
                        Biên bản được lập thành 04 (bốn) bản. Bên giao hàng giữ 02 bản (01 bản có chữ ký của bên vận tải và bên giao hàng khi giao hàng; 01 bản có đầy đủ chữ ký của cả 3 bên do bên vận tải chuyển trả). Bên vận tải và bên nhận hàng mỗi bên giữ 01 bản có đầy đủ chữ ký của cả 3 bên.
                      </div>
                    </div>
                   
                     
                    <div class="row mt32 mb20" id="informations" style="text-align: center; margin-top: 30px">
                      <div class="col-auto col-4 mw-100 mb-2">
                          <p style="font-weight: bold;">BÊN GIAO HÀNG</p>
                           <p>(Ký và ghi rõ họ tên)</p>
                      </div>
                      <div class="col-auto col-4 mw-100 mb-2">
                           <p style="font-weight: bold;">BÊN VẬN TẢI</p>
                           <p>(Ký và ghi rõ họ tên)</p>
                      </div>
                      <div class="col-auto col-4 mw-100 mb-2">
                          <p style="font-weight: bold;"> BÊN NHẬN HÀNG</p>
                          <p>(Ký và ghi rõ họ tên)</p>
                      </div>
                      
                    </div>
                    <!--footer text-->
                    <div class="footer o_clean_footer">
                        <div class="row">
                          <div class="col-auto col-3 mw-100 mb-2">
                              <span>BM.03-QT.01/GBD</span>
                          </div>
                          <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                            
                              <span>Lần ban hành 04</span>
                          </div>
                          <div class="col-auto col-3 mw-100 mb-1" style="text-align: center;">
                              <ul t-if="report_type == 'pdf'" class="list-inline pagenumber float-end text-center">
                                  <li class="list-inline-item"><strong><span class="page"/></strong></li>
                              </ul>
                          </div>
                        </div>
                    </div>
                   
                </div>
            </t>
 </t>
  </t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_nhan_hang" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                      <t t-if="'IN/' in o.name or 'IN-TRANS' in o.name">
                          <div class="row">
                                <div class="col-6 mb4">
                                    <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 45px;" alt="Logo"/>
                                </div>
                                <div class="col-6 text-end" style="margin-top:22px;" t-field="o.company_id.report_header" name="moto">
                                  <li t-if="o.company_id.name" style="list-style-type: none;">
                                      <span t-field="o.company_id.name"/>
                                    </li>
                                </div>
                            </div>
                        <div class="page">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 13px; font-family: Times New Roman; margin-top: 20px">
                                     <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU NHẬN HÀNG</h3>
                                   <h3 style="color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                                   <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                     <div t-if="o.partner_id">
                                        	<p>
                                        		<strong>Nhà cung cấp: <span t-field="o.partner_id"/></strong>
                                        	</p>
                                    </div>
                                    <div>
                                        <p><strong>Đơn vị kinh doanh: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt48 mb32">
                                <div t-if="o.origin" class="" name="div_origin">
                                    <strong>Đơn hàng:</strong>
                                    <p t-field="o.origin"/>
                                </div>
                                <div class="row">
                                    <div class="col-auto" name="div_state">
                                    <strong>Trạng thái:</strong>
                                    <p t-field="o.state"/>
                                    </div>
                                    <div class="col-auto" name="div_sched_date">
                                        <strong>Ngày dự kiến:</strong>
                                        <p t-field="o.scheduled_date"/>
                                    </div>
                                    <div class="col-auto" name="div_weight">
                                        <strong>Tổng KLTT(Kg): </strong>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package">
                                <t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
                                <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center;width: 40px" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_serial_number" class="text-center" t-if="has_serial_number">
                                           <strong>Số lô/Serial</strong>
                                        </th>
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:100px" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:100px">
                                            <strong>Số lượng</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:100px">
                                            <strong>Khối lượng lý thuyết (Kg)</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px" name="th_from" t-if="o.picking_type_id.code != 'incoming'" align="left" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đi</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px" name="th_to" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đến</strong>
                                        </th>
                                        
                                        <!--<th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_barcode" class="text-center" t-if="has_barcode">-->
                                        <!--    <strong>Mã vạch sản phẩm</strong>-->
                                        <!--</th>-->
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                     <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6" t-if="has_serial_number">
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                 <span t-if="o.state != 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.qty_done"/>
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                               
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                   <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                               
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'incoming'" groups="stock.group_stock_multi_locations">
                                                <span t-esc="ml.location_id.display_name"/>
                                                    <t t-if="ml.package_id">
                                                        <span t-field="ml.package_id"/>
                                                    </t>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                                <div>
                                                    <span t-field="ml.location_dest_id"/>
                                                    <t t-if="ml.result_package_id">
                                                        <span t-field="ml.result_package_id"/>
                                                    </t>
                                                </div>
                                            </td>
                                            
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center" t-if="has_barcode">-->
                                            <!--    <t t-if="product_barcode != ml.product_id.barcode">-->
                                            <!--        <span t-if="ml.product_id and ml.product_id.barcode">-->
                                            <!--            <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                            <!--        </span>-->
                                            <!--        <t t-set="product_barcode" t-value="ml.product_id.barcode"/>-->
                                            <!--    </t>-->
                                            <!--</td>-->
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.note"/>
                                            </td>
                                            
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                         <td t-if="has_serial_number"/>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td style="font-size: 15px; font-weight: bold">
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <span t-if="o.state != 'done'" t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td style="font-size: 15px; font-weight: bold">
                                            <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                   <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td t-if="o.picking_type_id.code != 'incoming'"/>
                                        <td t-if="o.picking_type_id.code != 'outgoing'"/>
                                       
                                        <!--<td t-if="has_barcode"/>-->
                                        <td/>
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                            
                        </div>
                        <p/>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center;">
                         
                           
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                <p style="font-weight: bold;">NGƯỜI LẬP</p>
                                 <p>(Ký và ghi rõ họ tên)</p>
                            </div>
                           
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <p style="font-weight: bold;">THỦ KHO</p>
                                <p>(Ký và ghi rõ họ tên)</p>
                            </div>
                        
                        </div>
                      </t>
                      <t t-else="">
                          <p style="text-align: center; font-size: 20px; color: red">Warning!!! Bạn đang in nhầm phiếu</p>
                        </t>
                    </t>
                </t>
            </t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_kiem_tra_chat_luong" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                      <t t-if="'INPUT-QC' in o.name or 'QC' in o.name">
                        
                        <div class="page">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 13px; font-family: Times New Roman; margin-top: 20px">
                                    <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU KIỂM TRA CHẤT LƯỢNG</h3>
                                   
                                   <h3 style="color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                                   <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                     <div t-if="o.partner_id">
                                        	<p>
                                        		<strong>Nhà cung cấp: <span t-field="o.partner_id"/></strong>
                                        	</p>
                                    </div>
                                    <div>
                                        <p><strong>Đơn vị kinh doanh: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt48 mb32">
                                <div t-if="o.origin" class="" name="div_origin">
                                    <strong>Đơn hàng:</strong>
                                    <p t-field="o.origin"/>
                                </div>
                                <div class="row">
                                    <div class="col-auto" name="div_state">
                                    <strong>Trạng thái:</strong>
                                    <p t-field="o.state"/>
                                    </div>
                                    <div class="col-auto" name="div_sched_date">
                                        <strong>Ngày dự kiến:</strong>
                                        <p t-field="o.scheduled_date"/>
                                    </div>
                                    <div class="col-auto" name="div_weight">
                                        <strong>Tổng KLTT(Kg): </strong>
                                    </div>
                                </div>
                            </div>

                            <br/>
                            <br/>
                            <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package">
                                <t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
                                <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <!--<strong t-if="'done' in o.state">Số lượng đặt hàng</strong>-->
                                            <!--<strong t-if="'INT/' in o.name">Số lượng thực nhận</strong>-->
                                            
                                            <t t-if="'done' in o.state">
                                               <strong>SL thực nhận</strong>
                                            </t>
                                             <t t-else="">
                                               <strong>SL đặt hàng</strong>
                                            </t>
                                            
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:70px">

                                                <strong>KL (Kg)</strong>
                                          
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_from" t-if="o.picking_type_id.code != 'incoming'" align="left" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đi</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_to" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đến</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_serial_number" class="text-center" t-if="has_serial_number">
                                           <strong>Số lô/Serial</strong>
                                        </th>
                                        <!--<th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_barcode" class="text-center" t-if="has_barcode">-->
                                        <!--    <strong>Mã vạch sản phẩm</strong>-->
                                        <!--</th>-->
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 300px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                 <span t-if="o.state != 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.qty_done"/>
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                                <!--<t t-set="total_reserved_uom_qty" t-value="total_reserved_uom_qty + ml.reserved_uom_qty"/>-->
                                                <!--<span t-field="ml.product_uom_id" groups="uom.group_uom"/>-->
                                                <!--<t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>-->
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                  <!--<span t-if="o.state == 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <!--<span t-if="o.state != 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                               
                                               
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'incoming'" groups="stock.group_stock_multi_locations">
                                                <span t-esc="ml.location_id.display_name"/>
                                                    <t t-if="ml.package_id">
                                                        <span t-field="ml.package_id"/>
                                                    </t>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                                <div>
                                                    <span t-field="ml.location_dest_id"/>
                                                    <t t-if="ml.result_package_id">
                                                        <span t-field="ml.result_package_id"/>
                                                    </t>
                                                </div>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6">
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"/>
                                            </td>
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center">-->
                                            <!--    <t t-if="product_barcode != ml.product_id.barcode">-->
                                            <!--        <span t-if="ml.product_id and ml.product_id.barcode">-->
                                            <!--            <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                            <!--        </span>-->
                                            <!--        <t t-set="product_barcode" t-value="ml.product_id.barcode"/>-->
                                            <!--    </t>-->
                                            <!--</td>-->
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-field="ml.move_id.note"/>
                                            </td>
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td>
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <span t-if="o.state != 'done'" t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td>
                                            <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                   <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <!--<td/>-->
                                        <td/>
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                            <p t-field="o.note"/>
                        </div>
                        <p/>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center;">
                        
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                  <p style="font-weight: bold;">NGƯỜI KIỂM HÀNG</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                             
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                  <p style="font-weight: bold;">THỦ KHO</p>
                                  <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                           
                        </div>
                      </t>

                      
                        <t t-else="">
                          <p style="text-align: center; font-size: 20px; color: red">Warning!!! Bạn đang in nhầm phiếu</p>
                        </t>
                    </t>
                </t>
</t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_luu_kho" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                     
                        <div class="row">
                                <div class="col-6 mb4">
                                    <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 45px;" alt="Logo"/>
                                </div>
                                <div class="col-6 text-end" style="margin-top:22px;" t-field="o.company_id.report_header" name="moto">
                                  <li t-if="o.company_id.name" style="list-style-type: none;">
                                      <span t-field="o.company_id.name"/>
                                    </li>
                                </div>
                            </div>
                        <div class="page">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 13px; font-family: Times New Roman; margin-top: 20px">
                                    <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">LỆNH NHẬP KHO</h3>
                                   
                                   <h3 style="color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                                   <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                     <div t-if="o.partner_id">
                                        	<p>
                                        		<strong>Nhà cung cấp: <span t-field="o.partner_id"/></strong>
                                        	</p>
                                    </div>
                                    <div>
                                        <p><strong>Đơn vị kinh doanh: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                            </div>
                         <p/>
                            <div class="row mt48 mb32">
                                <div t-if="o.origin" class="col-auto" name="div_origin">
                                    <strong>Đơn hàng:</strong>
                                    <p t-field="o.origin"/>
                                </div>
                                <div class="col-auto" name="div_state">
                                    <strong>Trạng thái:</strong>
                                    <p t-field="o.state"/>
                                </div>
                                <div class="col-auto" name="div_sched_date">
                                    <strong>Ngày hoàn tất:</strong>
                                    <p t-field="o.date_done"/>
                                </div>
                                <div class="col-auto" name="div_weight">
                                    <strong>Tổng KLTT(Kg): </strong>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package">
                                <t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
                                <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_serial_number" class="text-center" t-if="has_serial_number">
                                           <strong>Số lô/Serial</strong>
                                        </th>
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <!--<strong t-if="'done' in o.state">Số lượng đặt hàng</strong>-->
                                            <!--<strong t-if="'INT/' in o.name">Số lượng thực nhận</strong>-->
                                            
                                            <t t-if="'done' in o.state">
                                               <strong>SL thực nhận</strong>
                                            </t>
                                             <t t-else="">
                                               <strong>SL đặt hàng</strong>
                                            </t>
                                            
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:70px">
                                           
                                                 <strong>KL lý thuyết (Kg)</strong>
                                            
                                            <!-- <t t-if="'INT/' in o.name">-->
                                            <!--     <strong>KL thực tế (Kg)</strong>-->
                                            <!--</t>-->
                                          
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_from" t-if="o.picking_type_id.code != 'incoming'" align="left" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đi</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_to" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đến</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_barcode" class="text-center" t-if="has_barcode">
                                            <strong>Mã vạch sản phẩm</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    
                                    <t t-set="index" t-value="0"/>
                                   <t t-set="sorted_move_line_ids" t-value="o.move_line_ids_without_package.sorted(key=lambda ml: ml.move_id.id)"/>
                                    <t t-foreach="sorted_move_line_ids" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6">
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                 <span t-if="o.state != 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.qty_done"/>
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                                <!--<t t-set="total_reserved_uom_qty" t-value="total_reserved_uom_qty + ml.reserved_uom_qty"/>-->
                                                <!--<span t-field="ml.product_uom_id" groups="uom.group_uom"/>-->
                                                <!--<t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>-->
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                  <!--<span t-if="o.state == 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <!--<span t-if="o.state != 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                               
                                               
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'incoming'" groups="stock.group_stock_multi_locations">
                                                <span t-esc="ml.location_id.display_name"/>
                                                    <t t-if="ml.package_id">
                                                        <span t-field="ml.package_id"/>
                                                    </t>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                                <div>
                                                    <span t-field="ml.location_dest_id"/>
                                                    <t t-if="ml.result_package_id">
                                                        <span t-field="ml.result_package_id"/>
                                                    </t>
                                                </div>
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center">
                                                <t t-if="product_barcode != ml.product_id.barcode">
                                                    <span t-if="ml.product_id and ml.product_id.barcode">
                                                        <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                    </span>
                                                    <t t-set="product_barcode" t-value="ml.product_id.barcode"/>
                                                </t>
                                            </td>
                                            
                                            <td style="border: 1px solid black;">
                                                <span t-field="ml.move_id.note"/>
                                            </td>
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td>
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <span t-if="o.state != 'done'" t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td>
                                            <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                   <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td/>
                                        
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                            <p t-field="o.note"/>
                        </div>
                        <p/>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center;">
                          
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                  <p style="font-weight: bold;">NGƯỜI LẬP</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                   <p style="font-weight: bold;">P.KHHH</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                  <p style="font-weight: bold;">P.TCKT</p>
                                  <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                           
                        </div>
                      
                      
                      
                    </t>
                </t>
</t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_lay_hang" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                      <t t-if="'PICK' in o.name or 'QC' in o.name or 'OUTSOURCE' in o.name">
                        <div class="row">
                                <div class="col-6 mb4">
                                    <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 45px;" alt="Logo"/>
                                </div>
                                <div class="col-6 text-end" style="margin-top:22px;" t-field="o.company_id.report_header" name="moto">
                                  <li t-if="o.company_id.name" style="list-style-type: none;">
                                      <span t-field="o.company_id.name"/>
                                    </li>
                                </div>
                            </div>
                        <div class="page">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 12px; font-family: Times New Roman; margin-top: 10px">
                                  <t t-if="'PICK' in o.name">
                                    <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU LẤY HÀNG</h3>
                                  </t>
                                  <t t-if="'QC' in o.name">
                                    <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU XUẤT KIỂM ĐỊNH</h3>
                                  </t>
                                  <t t-if="'OUTSOURCE' in o.name">
                                    <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU XUẤT GIA CÔNG XI MẠ</h3>
                                  </t>
                                    
                                   <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                                   <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div>
                                     <div t-if="o.partner_id">
                                        	<p>
                                        		<strong>Khách hàng: <span t-field="o.partner_id"/></strong>
                                        	</p>
                                    </div>
                                    <div>
                                        <p><strong>Đơn vị kinh doanh: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt48 mb32">
                                <div t-if="o.origin" class="" name="div_origin">
                                    <strong>Đơn hàng:</strong>
                                    <p t-field="o.origin"/>
                                </div>
                                <div class="row">
                                    <div class="col-auto" name="div_state">
                                    <strong>Trạng thái:</strong>
                                    <p t-field="o.state"/>
                                    </div>
                                    <div class="col-auto" name="div_sched_date">
                                        <strong>Ngày dự kiến:</strong>
                                        <p t-field="o.scheduled_date"/>
                                    </div>
                                    <div class="col-auto" name="div_weight">
                                        <strong>Tổng KLTT(Kg): </strong>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <br/>
                  
                        <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package ">
                                <t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
                                <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;width:40px" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_serial_number" class="text-center">
                                           <strong>Số lô/Serial</strong>
                                        </th>
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:100px" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:100px">
                                               <strong>Số lượng</strong>
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:70px">
                                                <strong>KL lý thuyết (Kg)</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_from" t-if="o.picking_type_id.code != 'incoming'" align="left" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đi</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_to" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đến</strong>
                                        </th>
                                        
                                        <!--<th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_barcode" class="text-center">-->
                                        <!--    <strong>Mã vạch sản phẩm</strong>-->
                                        <!--</th>-->
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 350px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6">
                                                <!--<div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                 <span t-if="o.state != 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.qty_done"/>
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                                <!--<t t-set="total_reserved_uom_qty" t-value="total_reserved_uom_qty + ml.reserved_uom_qty"/>-->
                                                <!--<span t-field="ml.product_uom_id" groups="uom.group_uom"/>-->
                                                <!--<t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>-->
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                  <!--<span t-if="o.state == 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <!--<span t-if="o.state != 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                               
                                               
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'incoming'" groups="stock.group_stock_multi_locations">
                                                <span t-esc="ml.location_id.display_name"/>
                                                    <t t-if="ml.package_id">
                                                        <span t-field="ml.package_id"/>
                                                    </t>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                                <div>
                                                    <span t-field="ml.location_dest_id"/>
                                                    <t t-if="ml.result_package_id">
                                                        <span t-field="ml.result_package_id"/>
                                                    </t>
                                                </div>
                                            </td>
                                            
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center">-->
                                            <!--    <t t-if="product_barcode != ml.product_id.barcode">-->
                                            <!--        <span t-if="ml.product_id and ml.product_id.barcode">-->
                                            <!--            <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                            <!--        </span>-->
                                            <!--        <t t-set="product_barcode" t-value="ml.product_id.barcode"/>-->
                                            <!--    </t>-->
                                            <!--</td>-->
                                            
                                            <td style="border: 1px solid black;">
                                                <span t-field="ml.move_id.note"/>
                                            </td>
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td>
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <span t-if="o.state != 'done'" t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td>
                                            <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                   <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td/>
                                        <td/>
                                        
                                        
                                        <td/>
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                        
                        </div>
                        <p/>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center;">
                         
                          
                          
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                <p style="font-weight: bold;">NGƯỜI LẬP</p>
                                 <p>(Ký và ghi rõ họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <p style="font-weight: bold;">NGƯỜI SOẠN HÀNG</p>
                                <p>(Ký và ghi rõ họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <p style="font-weight: bold;">THỦ KHO</p>
                                <p>(Ký và ghi rõ họ tên)</p>
                            </div>
                          
                        </div>
                      </t>
                      <t t-else="">
                        <p style="text-align: center; font-size: 20px; color: red">Warning!!! Bạn đang in nhầm phiếu</p>
                      </t>
                    </t>
                </t>
</t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_dong_goi" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                      <t t-if="'PACK' in o.name">
                       
                        <div class="page">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 13px; font-family: Times New Roman; margin-top: 20px">
                                    <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU ĐÓNG GÓI</h3>
                                   
                                   <h3 style="color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                                   <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                     <div t-if="o.partner_id">
                                        	<p>
                                        		<strong>Khách hàng: <span t-field="o.partner_id"/></strong>
                                        	</p>
                                    </div>
                                    <div>
                                        <p><strong>Đơn vị kinh doanh: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt48 mb32">
                                <div t-if="o.origin" class="" name="div_origin">
                                    <strong>Đơn hàng:</strong>
                                    <p t-field="o.origin"/>
                                </div>
                                <div class="row">
                                    <div class="col-auto" name="div_state">
                                    <strong>Trạng thái:</strong>
                                    <p t-field="o.state"/>
                                    </div>
                                    <div class="col-auto" name="div_sched_date">
                                        <strong>Ngày dự kiến:</strong>
                                        <p t-field="o.scheduled_date"/>
                                    </div>
                                    <div class="col-auto" name="div_weight">
                                        <strong>Tổng KLTT(Kg): </strong>
                                    </div>
                                </div>
                            </div>

                            <br/>
                            <br/>
                            <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package ">
                                <t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
                                <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                               <strong>Số lượng</strong>
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:70px">
                                                <strong>KL lý thuyết (Kg)</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_from" t-if="o.picking_type_id.code != 'incoming'" align="left" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đi</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_to" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí đến</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_serial_number" class="text-center">
                                           <strong>Số lô/Serial</strong>
                                        </th>
                                        <!--<th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_barcode" class="text-center">-->
                                        <!--    <strong>Mã vạch sản phẩm</strong>-->
                                        <!--</th>-->
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 350px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                 <span t-if="o.state != 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.qty_done"/>
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                                <!--<t t-set="total_reserved_uom_qty" t-value="total_reserved_uom_qty + ml.reserved_uom_qty"/>-->
                                                <!--<span t-field="ml.product_uom_id" groups="uom.group_uom"/>-->
                                                <!--<t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>-->
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                  <!--<span t-if="o.state == 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <!--<span t-if="o.state != 'done'" t-esc="ml.product_id.weight"/>-->
                                                  <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                               
                                               
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'incoming'" groups="stock.group_stock_multi_locations">
                                                <span t-esc="ml.location_id.display_name"/>
                                                    <t t-if="ml.package_id">
                                                        <span t-field="ml.package_id"/>
                                                    </t>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'outgoing'" groups="stock.group_stock_multi_locations">
                                                <div>
                                                    <span t-field="ml.location_dest_id"/>
                                                    <t t-if="ml.result_package_id">
                                                        <span t-field="ml.result_package_id"/>
                                                    </t>
                                                </div>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6">
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"/>
                                            </td>
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center">-->
                                            <!--    <t t-if="product_barcode != ml.product_id.barcode">-->
                                            <!--        <span t-if="ml.product_id and ml.product_id.barcode">-->
                                            <!--            <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                            <!--        </span>-->
                                            <!--        <t t-set="product_barcode" t-value="ml.product_id.barcode"/>-->
                                            <!--    </t>-->
                                            <!--</td>-->
                                            
                                            <td style="border: 1px solid black;">
                                                <span t-field="ml.move_id.note"/>
                                            </td>
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td>
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <span t-if="o.state != 'done'" t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td>
                                            <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                   <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <!--<td/>-->
                                        <td/>
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                            <p t-field="o.note"/>
                        </div>
                        <p/>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center;">
                          
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                  <p style="font-weight: bold;">NGƯỜI LẬP</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                   <p style="font-weight: bold;">P.KHHH</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                  <p style="font-weight: bold;">P.TCKT</p>
                                  <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                           
                        </div>
                      
                      </t>
                      <t t-else="">
                          <p style="text-align: center; font-size: 20px; color: red">Warning!!! Bạn đang in nhầm phiếu</p>
                        </t>
                        
                    </t>
                </t>
                 </t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_xuat_kho" >
<t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                      <t t-if="'OUT' in o.name">
                        <div class="row">
                                <div class="col-6 mb4">
                                    <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 45px;" alt="Logo"/>
                                </div>
                                <div class="col-6 text-end" style="margin-top:22px;" t-field="o.company_id.report_header" name="moto">
                                  <li t-if="o.company_id.name" style="list-style-type: none;">
                                      <span t-field="o.company_id.name"/>
                                    </li>
                                </div>
                            </div>
                        <div class="page">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 13px; font-family: Times New Roman; margin-top: 20px">
                                    <t t-if="'OUT/' in o.name">
                                      <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU XUẤT KHO</h3>
                                    </t>
                                    <t t-if="'OUTSOURCE' in o.name">
                                        <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU XUẤT KHO GIA CÔNG</h3>
                                    </t>
                                    <t t-if="'OUT-TRANS' in o.name">
                                        <h3 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU XUẤT ĐIỀU CHUYỂN</h3>
                                    </t>
                                 
                                 
                                   <h3 style="color: #1c4ab5; font-weight: bolder" t-field="o.name"/>
                                   <div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                     <div t-if="o.partner_id">
                                        	<p>
                                        		<strong>Khách hàng: <span t-field="o.partner_id"/></strong>
                                        	</p>
                                    </div>
                                    <div>
                                        <p><strong>Đơn vị kinh doanh: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt48 mb32">
                                <div t-if="o.origin" class="" name="div_origin">
                                    <strong>Đơn hàng:</strong>
                                    <p t-field="o.origin"/>
                                </div>
                                <div class="row">
                                    <div class="col-3" name="div_state">
                                    <strong>Trạng thái:</strong>
                                    <p t-field="o.state"/>
                                    </div>
                                    <div class="col-3" name="div_sched_date">
                                        <strong>Ngày dự kiến:</strong>
                                        <p t-field="o.scheduled_date"/>
                                    </div>
                                    <div class="col-3" name="div_weight">
                                        <strong>Tổng KLTT(Kg): </strong>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <br/>
            
                            <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package ">
                                <t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
                                <t t-set="has_serial_number" t-value="any(move_line.lot_id or move_line.lot_name for move_line in o.move_line_ids)" groups="stock.group_production_lot"/>
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_serial_number" class="text-center" t-if="has_serial_number">
                                           <strong>Số lô/Serial</strong>
                                        </th>
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <!--<strong t-if="'done' in o.state">Số lượng đặt hàng</strong>-->
                                            <!--<strong t-if="'INT/' in o.name">Số lượng thực nhận</strong>-->
                                            
                                            <t t-if="'done' in o.state">
                                               <strong>SL thực nhận</strong>
                                            </t>
                                             <t t-else="">
                                               <strong>SL đặt hàng</strong>
                                            </t>
                                            
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:70px">
                                            
                                                <strong>KL lý thuyết (Kg)</strong>
                                        </th>
                                        
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_from" align="left" groups="stock.group_stock_multi_locations">
                                            <strong>Vị trí </strong>
                                        </th>
                                        <!--<th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_to"  groups="stock.group_stock_multi_locations">-->
                                        <!--    <strong>Vị trí đến</strong>-->
                                        <!--</th>-->
                                        
                                        <!--<th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_barcode" class="text-center" t-if="has_barcode">-->
                                        <!--    <strong>Mã vạch sản phẩm</strong>-->
                                        <!--</th>-->
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class=" text-center h6">
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                                                <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                 <span t-if="o.state != 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                
                                                
                                                
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.qty_done"/>
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                                
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                
                                                  <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                             
                                            </td>
                                            
                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-if="o.picking_type_id.code != 'incoming'" groups="stock.group_stock_multi_locations">-->
                                            <!--    <span t-esc="ml.location_id.display_name"/>-->
                                            <!--        <t t-if="ml.package_id">-->
                                            <!--            <span t-field="ml.package_id"/>-->
                                            <!--        </t>-->
                                            <!--</td>-->
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" groups="stock.group_stock_multi_locations">
                                                <div>
                                                    <span t-field="ml.location_id.display_name"/>
                                                    <t t-if="ml.result_package_id">
                                                        <span t-field="ml.result_package_id"/>
                                                    </t>
                                                </div>
                                            </td>
                                            

                                            <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center" t-if="has_barcode">-->
                                            <!--    <t t-if="product_barcode != ml.product_id.barcode">-->
                                            <!--        <span t-if="ml.product_id and ml.product_id.barcode">-->
                                            <!--            <div t-field="ml.product_id.barcode" t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>-->
                                            <!--        </span>-->
                                            <!--        <t t-set="product_barcode" t-value="ml.product_id.barcode"/>-->
                                            <!--    </t>-->
                                            <!--</td>-->
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                            </td>
                                            
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <td/>
                                        <!--<td><span t-if="o.state == 'done'"><t t-esc="total_qty_done"/></span></td>-->
                                        <td style="font-size: 15px; font-weight: bold">
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
	                                        <span t-if="o.state != 'done'" t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td style="font-size: 15px; font-weight: bold">
                                              <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                        <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                          
                                        <td/>
                                        <!--<td/>-->
                                        
                                        <td/>
                                       
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                          
                        </div>
                        <p/>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center;">
                          
      
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                  <p style="font-weight: bold;">NGƯỜI LẬP</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                   <p style="font-weight: bold;">P.KHHH</p>
                                   <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                              <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                  <p style="font-weight: bold;">P.TCKT</p>
                                  <p>(Ký và ghi rõ họ tên)</p>
                              </div>
                           
                         
                          
                        </div>
                    </t>
                      <t t-else="">
                          <p style="text-align: center; font-size: 20px; color: red">Warning!!! Bạn đang in nhầm phiếu</p>
                      </t>
                    </t>
            </t>
</t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_tinh_so_luong" >
<t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <br/>
                        <h2>Inventory Count Sheet</h2>
                        <t t-set="locations" t-value="docs.mapped('location_id')"/>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <!--<th groups="stock.group_stock_multi_locations"><strong>Location</strong></th>-->
                                    <th class="text-center"><strong>Product</strong></th>
                                    <!--<th groups="stock.group_production_lot"><strong>Lot/Serial Number</strong></th>-->
                                    <!--<th groups="stock.group_tracking_lot"><strong>Package</strong></th>-->
                                    <!--<th class="text-end"><strong>Available Quantity</strong></th>-->
                                    <!--<th class="text-end"><strong>On hand Quantity</strong></th>-->
                                    <!--<th class="text-end"><strong>Counted Quantity</strong></th>-->
                                    <th class="text-center"><strong>Mã vạch sản phẩm</strong></th>
                                    <th class="text-center"><strong>Mã lô</strong></th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="locations" t-as="location">
                                    <tr groups="stock.group_stock_multi_locations">
                                        <td style="border-bottom: 1px solid black;" colspan="2"><strong t-esc="location.display_name"/></td>
                                        <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" groups="stock.group_production_lot"/>-->
                                        <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" groups="stock.group_tracking_lot"/>-->
                                        <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;"/>-->
                                        <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;"><span t-field="location.barcode" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/></td>-->
                                    </tr>
                                    <tr t-foreach="docs.filtered(lambda quant: quant.location_id.id == location.id)" t-as="line" style="height: 50px;">
                                        <!--<td groups="stock.group_stock_multi_locations"/>-->
                                        <td style="border: 1px solid black; text-align: center; vertical-align: middle;"><span t-field="line.product_id"/></td>
                                        <!--<td groups="stock.group_production_lot"><span t-field="line.lot_id"/></td>-->
                                        <!--<td groups="stock.group_tracking_lot"><span t-field="line.package_id"/></td>-->
                                        <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-end"><span t-field="line.available_quantity"/> <span t-field="line.product_uom_id" groups="uom.group_uom"/></td>-->
                                        <!--<td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-end"><span t-field="line.quantity"/> <span t-field="line.product_uom_id" groups="uom.group_uom"/></td>-->
                                        <!--<td class="text-end">-->
                                            <!-- If 0, then leave blank so users have space to write a number -->
                                        <!--    <t t-if="line.inventory_quantity == 0"><span/></t>-->
                                        <!--    <t t-else=""><span t-field="line.inventory_quantity"/></t>-->
                                        <!--    <span t-field="line.product_uom_id" groups="uom.group_uom"/>-->
                                        <!--</td>-->
                                        <td style="border: 1px solid black; text-align: center; vertical-align: middle;" class="text-center">
                                          <div t-field="line.product_id.barcode" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                          <div t-field="line.product_id.barcode"/>
                                        </td>
                                        <td style="border: 1px solid black; text-align: center; vertical-align: middle;height: 100px" class=" text-center h6">
                                                <div t-esc="line.lot_id.name or line.lot_name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>
                                                <div t-esc="line.lot_id.name or line.lot_name"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
</template>

<template id="smartbiz_tcc.report_tcc_reserve_order_phieu_giu_hang" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="row" style="font-size: 13px; font-family: Times New Roman;">
                            <div class="col-6">
                                 <div>
                                    <strong> CÔNG TY CP TM &amp; TV TÂN CƠ</strong>
                                 </div>
                                 <div>
                                     <strong>PHÒNG KẾ HOẠCH &amp; HÀNG HÓA</strong>
                                 </div>
                            </div>
                            <div class="col-6">
                                <table class="table">
                                    <tr>
                                        <td style="border: 1px solid black; width: 70px;">Số PĐN:</td>
                                        <td style="border: 1px solid black; "><span t-field="o.request_number"/></td>
                                        <td style="border: 1px solid black; width: 70px;">Ngày:</td>
                                        <td style="border: 1px solid black; "><span t-field="o.request_date"/></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black; width: 70px;">Số LXK:</td>
                                        <td style="border: 1px solid black;"><span t-field="o.name"/></td>
                                        <td style="border: 1px solid black;  width: 70px;">Ngày:</td>
                                        <td style="border: 1px solid black;"><span t-esc="o.write_date.strftime('%d/%m/%Y')"/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="page" style="font-size: 13px; font-family: Times New Roman;">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 12px; font-family: Times New Roman; margin-top: 10px">
                                    <h4 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU ĐỀ NGHỊ KIÊM LỆNH XUẤT KHO VÀ PACKING LIST</h4>
                                   <!--<h3 style="text-align: center;color: #1c4ab5; font-weight: bolder" t-field="o.name"/>-->
                                   <!--<div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>-->
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                    
                                    <div t-if="'transfer' in o.reserve_type">
                                        <p><strong>Xuất cho: <span t-field="o.destination_team_id"/></strong></p>
                                    </div>
                                     <div class="row">
                                        	<div class="col-6">
                                        		<strong>Tại kho: <span t-field="o.warehouse_id"/></strong>
                                        	</div>
                                        	<div class="col-6">
                                        	    Thời gian giao hàng: Trước ngày
                                        	</div>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt30 mb20">
                                <!--<div t-if="o.name" class="" name="div_origin">-->
                                <!--    <strong>Đơn hàng:</strong>-->
                                <!--    <p t-field="o.name"/>-->
                                <!--</div>-->
                                <div class="row">
                                    <div class="col-2" name="div_state">
                                        <strong>Lý do xuất kho:</strong>
                                        <p/>
                                    </div>
                                    <div class="col-2" name="div_sched_date">
                                        <strong>Xuất bán: </strong>
                                        <p/>
                                    </div>
                                    <div class="col-2" name="div_weight">
                                        <strong>Điều chuyển: </strong>
                                    </div>
                                    <div class="col-2" name="div_state">
                                        <strong>Gia công:</strong>
                                        <p/>
                                    </div>
                                    <div class="col-2 flex" name="div_sched_date">
                                        <strong>Xi mạ:</strong>
                                        <p/>
                                    </div>
                                    <div class="col-2" name="div_weight">
                                        <div class="d-flex">
                                            <div>
                                            <strong>Xuất mẫu: </strong>
                                            </div>
                                            <div>
                                                <span>- Có trả lại</span><br/>
                                                <span>- Không trả lại</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                        <table class="table table-sm table-bordered" t-if="o.order_line_ids ">
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 20px" name="th_no">Số TT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Mã hàng</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle;width:100px" name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <strong>Vị trí</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <strong>Hợp đồng</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 100px">
                                               <strong>Số lượng</strong>
                                        </th>
                                        
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                                <strong>Trọng lượng (Kg)</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                               <strong>Hàng của đơn vị</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                               <strong>Đơn hàng số</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                            <strong>Thực xuất/Packing list</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    <t t-set="sorted_lines" t-value="o.order_line_ids.sorted(key=lambda x: x.product_id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.default_code"/><br/>
                                                
                                            </td>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.name"/><br/>
                                                
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_id.uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                 <span t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                               
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                  <span t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle; font-size: 14px">
                                               <span t-field="o.sale_team_id"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                                <span t-field="ml.note"/>
                                            </td>
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td>
	                                        <span t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td>
                                            
    	                                   <span t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td/>
                                       
                                        
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                        
                        </div>
                        <p/>
                        <span><strong>Ghi chú:</strong> - Hàng đi đường phải có Phiếu xuất kho kiêm vận chuyển nội bộ</span><br/>
                        <span style="margin-left: 62px;">- Hàng chỉ được ra khỏi kho khi có Phiếu xuất kho</span>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center; margin-top: 40px">
                         
                          
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                <div style="font-weight: bold;">NGƯỜI LẬP</div>
                                 <p>(Ký, họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <div style="font-weight: bold;">LÃNH ĐẠO ĐƠN VỊ</div>
                                <p>(Ký, họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <div style="font-weight: bold;">THEO DÕI</div>
                                <p>(Ký, họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <div style="font-weight: bold;">P.TCKT</div>
                                <p>(Ký, họ tên)</p>
                            </div>
                        </div>
                      </t>
                      
                   
                </t>
    </t>
</template>

<template id="smartbiz_tcc.report_stock_picking_phieu_de_nghi_kiem_xuat_kho" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="row" style="font-size: 13px; font-family: Times New Roman;">
                            <div class="col-6">
                                 <div>
                                    <strong> CÔNG TY CP TM &amp; TV TÂN CƠ</strong>
                                 </div>
                                 <div>
                                     <strong>PHÒNG KẾ HOẠCH &amp; HÀNG HÓA</strong>
                                 </div>
                            </div>
                            <div class="col-6">
                                <table class="table">
                                    <tr>
                                        <td style="border: 1px solid black; width: 70px;">Số PĐN:</td>
                                        <td style="border: 1px solid black; "><span t-field="o.quote_number"/></td>
                                        <td style="border: 1px solid black; width: 70px;">Ngày:</td>
                                        <td style="border: 1px solid black; "><span t-esc="o.scheduled_date.strftime('%d/%m/%Y')"/></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black; width: 70px;">Số LXK:</td>
                                        <td style="border: 1px solid black;"><span t-field="o.origin"/></td>
                                        <td style="border: 1px solid black;  width: 70px;">Ngày:</td>
                                        <td style="border: 1px solid black;"><span t-esc="o.create_date.strftime('%d/%m/%Y')"/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="page" style="font-size: 13px; font-family: Times New Roman;">
                            <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 12px; font-family: Times New Roman; margin-top: 10px">
                                    <h4 style="text-align: center;color: #1c4ab5; font-weight: bolder">PHIẾU ĐỀ NGHỊ KIÊM LỆNH XUẤT KHO VÀ PACKING LIST</h4>
                                   <!--<h3 style="text-align: center;color: #1c4ab5; font-weight: bolder" t-field="o.name"/>-->
                                   <!--<div t-field="o.name" t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px; height:50px;'}"/>-->
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                            <div class="">
                                    
                                    <div>
                                        <p><strong>Xuất cho: <span t-field="o.sale_team_id"/></strong></p>
                                    </div>
                                     <div class="row">
                                        	<div class="col-6">
                                        		<strong>Tại kho: <span t-field="o.warehouse_id"/></strong>
                                        	</div>
                                        	<div class="col-6">
                                        	    Thời gian giao hàng: Trước ngày
                                        	</div>
                                    </div>
                            </div>
                         <p/>
                            <div class="mt30 mb20">
                                <!--<div t-if="o.name" class="" name="div_origin">-->
                                <!--    <strong>Đơn hàng:</strong>-->
                                <!--    <p t-field="o.name"/>-->
                                <!--</div>-->
                                <div class="row">
                                    <div class="col-2" name="div_state">
                                        <strong>Lý do xuất kho:</strong>
                                        <p/>
                                    </div>
                                    <div class="col-2" name="div_sched_date">
                                        <strong>Xuất bán: </strong>
                                        <p/>
                                    </div>
                                    <div class="col-2" name="div_weight">
                                        <strong>Điều chuyển: </strong>
                                    </div>
                                    <div class="col-2" name="div_state">
                                        <strong>Gia công:</strong>
                                        <p/>
                                    </div>
                                    <div class="col-2 flex" name="div_sched_date">
                                        <strong>Xi mạ:</strong>
                                        <p/>
                                    </div>
                                    <div class="col-2" name="div_weight">
                                        <div class="d-flex">
                                            <div>
                                            <strong>Xuất mẫu: </strong>
                                            </div>
                                            <div>
                                                <span>- Có trả lại</span><br/>
                                                <span>- Không trả lại</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <br/>
                  
                        <table class="table table-sm table-bordered" t-if="o.move_line_ids and o.move_ids_without_package ">
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 20px" name="th_no">STT</th>
                                      
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: auto" name="th_product">
                                            <strong>Mã hàng</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle;" name="th_product">
                                            <strong>Tên hàng - quy cách</strong>
                                        </th>
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:100px " name="th_unit">
                                            <strong>ĐVT</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <strong>Vị trí</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                            <strong>Hợp đồng</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 100px">
                                               <strong>Số lượng</strong>
                                        </th>
                                        
                                        
                                         <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                                <strong>Trọng lượng (Kg)</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                               <strong>Hàng của đơn vị</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width:50px">
                                               <strong>Đơn hàng số</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                            <strong>Thực xuất/Packing list</strong>
                                        </th>
                                        <th style="border: 1px solid black; text-align: center; vertical-align: middle; width: 200px">
                                           <strong>Ghi chú</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_qty_done" t-value="0"/>
                                    <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" t-esc="index"/>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.default_code"/><br/>
                                                
                                            </td>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.name"/><br/>
                                                
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom_group">
                                                <span t-field="ml.product_id.uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               <span t-field="ml.location_id.name" groups="uom.group_uom"/>
                                                
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                 <span t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                                
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                
                                                
                                                <t t-set="total_product_quantity" t-value="total_product_quantity + ml.quantity"/>
                                               
                                            </td>
                                           
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                                  <span t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle; font-size: 14px">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                               
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-field="ml.move_id.note"/>
                                            </td>
                                        </tr>
                                    </t>
                                    
                                    <t>
                                      <tr style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td>
	                                        <span t-esc="total_product_quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </td>
                                        <td>
                                            
    	                                   <span t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        
                                        <td/>
                                        <td/>
                                        <td/>
                                        <td/>
                                       
                                        
                                      </tr>
                                    </t>
                                    
                                  </tbody>
                            </table>
                            
                        
                        </div>
                        <p/>
                        <span><strong>Ghi chú:</strong> - Hàng đi đường phải có Phiếu xuất kho kiêm vận chuyển nội bộ</span><br/>
                        <span style="margin-left: 62px;">- Hàng chỉ được ra khỏi kho khi có Phiếu xuất kho</span>
                        <div class="row mt32 mb32" id="informations" style="display: flex; justify-content: space-between ;text-align: center; margin-top: 40px">
                         
                          
                             <div class="col-auto col-3 mw-100 mb-2" style="text-align: center;">
                                <div style="font-weight: bold;">NGƯỜI LẬP</div>
                                 <p>(Ký, họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <div style="font-weight: bold;">LÃNH ĐẠO ĐƠN VỊ</div>
                                <p>(Ký, họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <div style="font-weight: bold;">THEO DÕI</div>
                                <p>(Ký, họ tên)</p>
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2" style="text-align: center; ">
                                <div style="font-weight: bold;">P.TCKT</div>
                                <p>(Ký, họ tên)</p>
                            </div>
                        </div>
                      </t>
                      
                   
                </t>
    </t>
</template>

<template id="smartbiz_tcc.report_stock_picking_lenh_nhap_kho" >
<t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="row" style="font-size: 13px; font-family: Times New Roman;">
                            <div class="col-8">
                                 <div>
                                    <strong> CÔNG TY CP TM &amp; TV TÂN CƠ</strong>
                                 </div>
                                 <div>
                                     <strong>PHÒNG KẾ HOẠCH &amp; HÀNG HÓA</strong>
                                 </div>
                            </div>
                            <div class="col-4">
                                <table class="table">
                                    <tr>
                                        <td style="border: 1px solid black; width: 70px;">Số:</td>
                                        <td style="border: 1px solid black; "><span t-field="o.request_number"/></td>
                                        <!--<th style="border: 1px solid black; width: 70px;">Ngày:</th>-->
                                        <!--<th style="border: 1px solid black; "/>-->
                                    </tr>
                                    <tr>
                                        <!--<td style="border: 1px solid black; width: 70px;">Số LXK:</td>-->
                                        <!--<td style="border: 1px solid black;"><span t-field="o.origin"/></td>-->
                                        <td style="border: 1px solid black;  width: 70px;">Ngày:</td>
                                        <td style="border: 1px solid black;"><span t-if="o.date_done" t-esc="o.date_done.strftime('%d/%m/%Y')"/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                    <div class="page" style="font-size: 13px; font-family: Times New Roman;">
                        <div class="row justify-content-end mb16">
                              <div style=" text-align: center; font-size: 12px; font-family: Times New Roman; margin-top: 10px">
                                    <h4 style="text-align: center;color: #1c4ab5; font-weight: bolder">LỆNH NHẬP KHO</h4>
                                   
                                   </div>
                              </div>
                             
                            <br/>
                            <br/>
                        <div>
                            <div class="row">
                                <div class="col-3">
                                    <div><strong>Nơi nhận: </strong> </div>
                                    <div><strong>Thông tin hàng hóa: </strong></div>
                                </div>
                                <div class="col-9">
                                    <div style="padding-left: 3px;">
                                        Tổng kho <span t-field="o.warehouse_id.name"/><br/>
                                     <span t-field="o.commodity_information"/>
                                    </div>
                                    
                                </div>
                                
                            </div>
                            
                            <table class="table table-borderless" style="font-size: 13px; font-family: Times New Roman; width: 100%;">
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">ĐVKD :</td>
                                    <td style="width: 75%;"><span t-field="o.sale_team_id"/></td>
                                </tr>
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">Số hợp đồng/Job Code :</td>
                                    <td style="width: 75%;"><span t-field="o.job_code"/></td>
                                </tr>
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">Tờ khai HQ :</td>
                                    <td style="width: 75%;"><span t-field="o.customs_declaration"/></td>
                                </tr>
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">Phê duyệt kế hoạch :</td>
                                    <td style="width: 75%;"><span t-field="o.plan_approval"/></td>
                                </tr>
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">Số báo giá :</td>
                                    <td style="width: 75%;"><span t-field="o.quote_number"/></td>
                                </tr>
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">Nhà cung cấp :</td>
                                    <td style="width: 75%;"><span t-field="o.partner_id.name"/></td>
                                </tr>
                                <tr>
                                    <td style="width: 25%; padding-left: 40px;">Biên bản kiểm tra :</td>
                                    <td style="width: 75%;"><span t-field="o.inspection_number"/></td>
                                </tr>
                            </table>

                        </div>
                        <p/>
                        <table class="table table-sm mt20 table-bordered" t-if="o.move_line_ids and o.move_ids_without_package " name="stock_move_line_table">
                       
                        <thead>
                            <tr>
                                <th style="border: 1px solid black; text-align: center; vertical-align: middle;width: 40px"><strong>Số TT</strong></th>
                                <th style="border: 1px solid black; vertical-align: middle"><strong>Mã hàng</strong></th>
                                <th style="border: 1px solid black; vertical-align: middle"><strong>Tên hàng</strong></th>
                                <th name="th_sml_product1" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong>Quy cách</strong></th>
                                <th name="th_sml_product2" style="border: 1px solid black; text-align: center; vertical-align: middle; width: 100px"><strong>ĐVT</strong></th>
                                
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Loại kiện</th>
                                <th name="th_sml_quantity" class="text-center" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong>Số lượng</strong></th>
                                
                                    <th style="border: 1px solid black; text-align: center; vertical-align: middle;">
                                        Đơn trọng
                                    </th>
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Trọng lượng lý thuyết(Kg)</th>
                                <!--<th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Mã đóng gói</th>-->
                                <!--<th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle;"><strong/>Số kiện đóng gói</th>-->
                                <th name="th_sml_product" style="border: 1px solid black; text-align: center; vertical-align: middle; width: 150px"><strong/>Ghi chú</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                          <t t-set="total_qty_done" t-value="0"/>
                                   <t t-set="total_product_uom_qty" t-value="0"/>
                                    <t t-set="total_product_quantity" t-value="0"/>
                                    <t t-set="total_weight_done" t-value="0"/>
                                    <t t-set="total_weight_uom_qty" t-value="0"/>
                                    <t t-set="sorted_lines" t-value="o.move_line_ids.sorted(key=lambda x: x.move_id.id)"/>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="sorted_lines" t-as="ml">
                                      <t t-set="index" t-value="index + 1"/>
                                        <tr>
                                            <td style="border: 1px solid black; text-align: center;" t-esc="index"/>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.default_code"/><br/>
                                            </td>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.display_name"/><br/>
                                                <span t-field="ml.product_id.description_picking"/>
                                            </td>
                                            <td style="border: 1px solid black; vertical-align: middle;">
                                                <span t-field="ml.product_id.specifications"/><br/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <!--<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>-->
                                                <span t-field="ml.product_id.uom_id" groups="uom.group_uom"/>
                                                <!--<t t-set="total_reserved_uom_qty" t-value="total_reserved_uom_qty + ml.reserved_uom_qty"/>-->
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.package_type"/>
                                            </td>
                                             <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-if="o.state == 'done'" t-field="ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                <t t-set="total_qty_done" t-value="total_qty_done + ml.quantity"/>
                                                <!--<t t-set="single_weight" t-value="float(ml.move_id.actual_weight)/(ml.quantity)" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>-->
                                               
                                            </td>
                                            
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                                <span t-field="ml.product_id.weight"/>
                                            </td>
                                            <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-if="o.state == 'done'" t-esc="ml.product_id.weight * ml.qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  <span t-if="o.state != 'done'" t-esc="ml.product_id.weight * ml.quantity" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                                  
                                                    <t t-set="total_weight_done" t-value="total_weight_done + ml.product_id.weight * ml.qty_done"/>
                                                    <t t-set="total_weight_uom_qty" t-value="total_weight_uom_qty + ml.product_id.weight * ml.quantity"/>
                                            </td>
                                              <td style="border: 1px solid black; text-align: center; vertical-align: middle;" name="td_uom">
                                              <span t-field="ml.move_id.note"/>
                                            </td>
                                           
                                          
                                        </tr>
                                    </t>
                                   <t>
                                      <tr style="border: 1px solid #000; text-align: center; vertical-align: middle;">
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">Tổng cộng</td>
                                        <td/>
                                       <td/>
                                        <td>
                                        <td/>
                                        </td>
                                        <td style="font-size: 15px; font-weight: bold">
                                          <span t-if="o.state == 'done'" t-esc="total_qty_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
	                                      
                                        </td>
                                      
                                        <td/>
                                        <td style="font-size: 15px; font-weight: bold">
                                            <span t-if="o.state == 'done'" t-esc="total_weight_done" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
    	                                   <span t-if="o.state != 'done'" t-esc="total_weight_uom_qty" t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </td>
                                        <td style="font-size: 15px; font-weight: bold">
                                         
                                        </td>
                                          
                                        
                                      </tr>
                                    </t>
                            
                        </tbody>
                    </table>
                    </div>
                    <p/>
                    <div class="row">
                        <div class="col-3">
                            <strong> Điều kiện khác: </strong>
                        </div>
                        <div class="col-9">
                            <span>- Đơn trọng trên tính theo lý thuyết</span><br/>
                            <span>- Kế hoạch bán</span> <span t-field="o.sale_plan"/><br/>
                            <span>- </span>
                        </div>
                    </div>
                    <div class="row  mb20" id="informations" style="text-align: center; margin-top: 10px">
                      <div class="col-auto col-4 mw-100 mb-2">
                          <div style="font-weight: bold;">NGƯỜI LẬP</div>
                           <div>(Ký, họ tên)</div>
                      </div>
                      <div class="col-auto col-4 mw-100 mb-2">
                           <div style="font-weight: bold;">P.KHHH</div>
                           <div>(Ký, họ tên)</div>
                      </div>
                      <div class="col-auto col-4 mw-100 mb-2">
                          <div style="font-weight: bold;">P.TCKT</div>
                          <div>(Ký, họ tên)</div>
                      </div>
                      
                    </div>
                    </t>
                </t>
</t>
</template>


</odoo>
